# EzPG 관리자 페이지 구성

## 개요

EzPG 전자결제 시스템의 관리자 페이지 구성에 대한 문서입니다. 본 문서는 관리자 로그인 이후의 페이지 구성, 메뉴 구조, 주요 기능에 대해 설명합니다.

## 로그인 페이지

### 기본 구성

- 로고 및 브랜드 요소
- 사용자 ID 입력 필드
- 비밀번호 입력 필드
- 로그인 버튼

### 구글 OTP 인증

- 1차 로그인(ID/PW) 성공 후 구글 OTP 인증 화면으로 전환
- OTP 코드 입력 필드
- 인증 버튼
- 인증 실패 시 오류 메시지 표시

### 보안 기능

- HTTPS 적용
- 로그인 시도 제한
- 세션 타임아웃 설정
- 로그인 이력 기록

## 대시보드 (메인 페이지)

### 레이아웃

- 상단 네비게이션 바: 로고, 주요 메뉴, 사용자 정보, 알림, 로그아웃
- 사이드바: 세부 메뉴 항목
- 메인 콘텐츠 영역: 대시보드 위젯

### 주요 위젯

- **가맹점별 총 합산 잔액**: 현재 각 가맹점의 잔액을 카드 형태로 표시
- **거래 요약**: 오늘/이번 주/이번 달 입금액, 출금액, 수수료 요약
- **최근 거래 내역**: 최근 10건의 거래 내역 테이블
- **시스템 상태**: 서버 상태, API 호출 통계 등

### 권한별 표시 내용

- **본사**: 모든 가맹점의 정보 표시
- **가맹점**: 해당 가맹점의 정보만 표시

## 메뉴 구성

### 본사 권한 메뉴

1. **대시보드**

   - 전체 가맹점 요약 정보
   - 시스템 상태 모니터링

2. **가맹점 관리**

   - 가맹점 목록
   - 가맹점 등록/수정
   - 가맹점 상세 정보

3. **거래 관리**

   - 입금 내역
   - 출금 내역
   - 거래 상태 관리

4. **가상계좌 관리**

   - 가상계좌 발급
   - 가상계좌 상태 관리
   - 가상계좌 설정

5. **수수료 관리**

   - 가맹점별 입금 수수료 설정
   - 가맹점별 출금 수수료 설정
   - 수수료 정산 내역

6. **설정**

   - 시스템 설정
   - 알림 설정
   - 보안 설정

7. **보고서**
   - 거래 통계
   - 수수료 통계
   - 가맹점별 보고서

### 가맹점 권한 메뉴

1. **대시보드**

   - 가맹점 요약 정보
   - 거래 통계

2. **거래 내역**

   - 입금 내역
   - 출금 내역

3. **가상계좌**

   - 가상계좌 정보
   - 가상계좌 발급 요청

4. **출금 신청**

   - 출금 신청 폼
   - 출금 신청 내역

5. **설정**
   - 계정 설정
   - 알림 설정

## 주요 기능 상세

### 1. 가맹점 관리

#### 가맹점 등록/수정

- 가맹점 기본 정보 입력
- 가맹점 수수료 설정
  - 입금 수수료율 설정
  - 출금 수수료율 설정
- 가상계좌 유형 설정
  - 고정형/일회성 선택
- 입금 신청금액 일치 여부 설정
  - 정확히 일치 필요 여부
  - 허용 오차 범위 설정

#### 가맹점 목록

- 가맹점 ID, 이름, 연락처, 등록일, 상태 등 표시
- 검색 및 필터링 기능
- 상세 정보 조회 기능

### 2. 거래 관리

#### 입금 내역

- 거래 ID, 가맹점, 금액, 일시, 상태 등 표시
- 날짜 범위 필터링
- 가맹점별 필터링
- 상태별 필터링

#### 출금 내역

- 거래 ID, 가맹점, 금액, 일시, 상태, 출금계좌 등 표시
- 날짜 범위 필터링
- 가맹점별 필터링
- 상태별 필터링

### 3. 가상계좌 관리

#### 가상계좌 발급

- 가맹점 선택
- 가상계좌 유형 선택 (고정형/일회성)
- 은행 선택
- 발급 요청 처리

#### 가상계좌 목록

- 계좌번호, 은행, 가맹점, 유형, 상태 등 표시
- 가맹점별 필터링
- 유형별 필터링
- 상태별 필터링

### 4. 수수료 관리

#### 수수료 설정

- 가맹점별 입금 수수료율 설정
- 가맹점별 출금 수수료율 설정
- 일괄 수수료 설정 기능

#### 수수료 정산 내역

- 정산 ID, 가맹점, 기간, 금액, 상태 등 표시
- 기간별 필터링
- 가맹점별 필터링

## 가상계좌 입금 테스트

### 테스트 시나리오

1. 동일 금액 여러 번 입금 테스트

   - 같은 가상계좌에 동일 금액 3회 연속 입금
   - API 응답 확인 및 처리 결과 검증
   - 중복 처리 방지 메커니즘 검증

2. 입금 신청금액 일치 여부 테스트
   - 정확히 일치 필요 설정 시: 신청금액과 다른 금액 입금 시도
   - 허용 오차 설정 시: 오차 범위 내/외 금액 입금 시도
   - 각 케이스별 시스템 동작 검증

## 구현 기술 스택

- **프론트엔드**: Next.js 14, Tailwind CSS, shadcn/ui, Zustand, TypeScript
- **백엔드**: Next.js API Routes, MSSQL
- **인증**: JWT, Google Authenticator
- **배포**: Vercel 또는 자체 서버

## 화면 구성 예시

### 로그인 페이지

```
+----------------------------------+
|           EzPG 로고              |
|                                  |
|  +----------------------------+  |
|  |        사용자 ID           |  |
|  +----------------------------+  |
|                                  |
|  +----------------------------+  |
|  |        비밀번호            |  |
|  +----------------------------+  |
|                                  |
|  +----------------------------+  |
|  |         로그인             |  |
|  +----------------------------+  |
|                                  |
+----------------------------------+
```

### 구글 OTP 인증 페이지

```
+----------------------------------+
|           EzPG 로고              |
|                                  |
|      Google OTP 인증 코드        |
|                                  |
|  +----------------------------+  |
|  |        OTP 코드            |  |
|  +----------------------------+  |
|                                  |
|  +----------------------------+  |
|  |          확인              |  |
|  +----------------------------+  |
|                                  |
+----------------------------------+
```

### 대시보드 (본사)

```
+------------------------------------------------------------------+
| 로고  |  대시보드  가맹점  거래  가상계좌  설정  | 사용자 로그아웃 |
+------+---------------------------------------------+---------------+
|      |                                                            |
| 메뉴 |  +----------------+  +----------------+  +---------------+ |
|      |  | 총 가맹점 수   |  | 오늘 입금액    |  | 오늘 출금액   | |
| 대시 |  |     25개       |  | 1,234,567원    |  | 987,654원     | |
| 보드 |  +----------------+  +----------------+  +---------------+ |
|      |                                                            |
| 가맹 |  +--------------------------------------------------+     |
| 점   |  |             가맹점별 잔액 현황                   |     |
|      |  |                                                  |     |
| 거래 |  | [그래프/차트 영역]                              |     |
|      |  |                                                  |     |
| 가상 |  +--------------------------------------------------+     |
| 계좌 |                                                            |
|      |  +--------------------------------------------------+     |
| 수수 |  |             최근 거래 내역                      |     |
| 료   |  |                                                  |     |
|      |  | 거래ID  가맹점  유형  금액     일시     상태    |     |
| 설정 |  | ------ ------- ----- -------- -------- --------- |     |
|      |  | T1234  가맹점A 입금  100,000  12:30:45 완료     |     |
| 보고 |  | T1233  가맹점B 출금  50,000   12:15:30 완료     |     |
| 서   |  | T1232  가맹점A 입금  200,000  11:45:20 완료     |     |
|      |  |                                                  |     |
|      |  +--------------------------------------------------+     |
|      |                                                            |
+------------------------------------------------------------------+
```

## 반응형 디자인

- 모바일, 태블릿, 데스크톱 화면에 최적화된 반응형 디자인 적용
- 작은 화면에서는 사이드바 접기/펼치기 기능
- 테이블 데이터는 작은 화면에서 카드 형태로 변환
- 터치 인터페이스 최적화
