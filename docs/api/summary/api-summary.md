# EzPG API 요약 문서

## 개요

이 문서는 EzPG 전자결제 시스템의 모든 API를 요약하여 제공합니다. 각 API의 파일명, 지원 여부, 테스트 가능 여부 등을 한눈에 확인할 수 있습니다.

## API 목록 테이블

| 카테고리          | API 명                   | 파일명                  | 구현 상태      | 테스트 가능 여부 | 실행 성공 여부 |
| ----------------- | ------------------------ | ----------------------- | -------------- | ---------------- | -------------- |
| **로그인/인증**   | 로그인 API               | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **로그인/인증**   | OTP 인증 API             | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **대시보드**      | 가맹점 잔액 조회 API     | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **대시보드**      | 최근 거래 내역 API       | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **가맹점 관리**   | 가맹점 등록 API          | user-registration.md    | 구현 완료      | 가능             | 성공           |
| **가맹점 관리**   | 가맹점 목록 조회 API     | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **가맹점 관리**   | 가맹점 설정 API          | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **거래 관리**     | 입금 내역 조회 API       | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **거래 관리**     | 출금 내역 조회 API       | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **거래 관리**     | 출금 API                 | withdrawal.md           | 구현 완료      | 가능             | 성공           |
| **가상계좌 관리** | 가상계좌 발급 API        | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **가상계좌 관리** | 가상계좌 입금 테스트 API | additional-apis.md      | 구현 완료      | 가능             | 성공           |
| **입금 처리**     | 수취조회 API             | api-processing-guide.md | 구현 필요      | 불가능           | 해당 없음      |
| **입금 처리**     | 입금사전조회 API         | api-processing-guide.md | 구현 필요      | 불가능           | 해당 없음      |
| **입금 처리**     | 입금 API                 | api-processing-guide.md | 구현 필요      | 불가능           | 해당 없음      |
| **입금 처리**     | 입금정정 API             | api-processing-guide.md | 구현 필요      | 불가능           | 해당 없음      |
| **입금 처리**     | 집계 API                 | api-processing-guide.md | 구현 필요      | 불가능           | 해당 없음      |
| **추가 필요**     | 시스템 설정 API          | 미정의                  | 추가 정의 필요 | 불가능           | 해당 없음      |
| **추가 필요**     | 알림 설정 API            | 미정의                  | 추가 정의 필요 | 불가능           | 해당 없음      |
| **추가 필요**     | 통계 API                 | 미정의                  | 추가 정의 필요 | 불가능           | 해당 없음      |
| **추가 필요**     | 로그 관리 API            | 미정의                  | 추가 정의 필요 | 불가능           | 해당 없음      |

## 구현 완료된 API 상세 정보

### 1. 로그인 및 인증 관련 API

#### 로그인 API

- **파일명**: additional-apis.md
- **주요 파라미터**: userId, password
- **응답 파라미터**: resultCode, resultMsg, token, userInfo, requireOtp
- **설명**: 사용자 ID와 비밀번호를 검증하여 인증을 수행하고, JWT 토큰을 발급합니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

#### OTP 인증 API

- **파일명**: additional-apis.md
- **주요 파라미터**: userId, otpCode
- **응답 파라미터**: resultCode, resultMsg, token
- **설명**: 구글 OTP 인증 코드를 검증하고, 완전한 접근 권한이 부여된 JWT 토큰을 발급합니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

### 2. 대시보드 관련 API

#### 가맹점 잔액 조회 API

- **파일명**: additional-apis.md
- **주요 파라미터**: merchantId (선택적)
- **응답 파라미터**: resultCode, resultMsg, balanceList
- **설명**: 가맹점별 총 합산 잔액을 조회합니다. 본사 계정은 모든 가맹점의 잔액을 조회할 수 있습니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

#### 최근 거래 내역 API

- **파일명**: additional-apis.md
- **주요 파라미터**: merchantId (선택적), limit, transactionType
- **응답 파라미터**: resultCode, resultMsg, transactions
- **설명**: 최근 거래 내역을 조회합니다. 본사 계정은 모든 가맹점의 거래 내역을 조회할 수 있습니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

### 3. 가맹점 관리 관련 API

#### 가맹점 등록 API

- **파일명**: user-registration.md
- **주요 파라미터**: merchantInfo, contactInfo, accountInfo, feeInfo, settingInfo
- **응답 파라미터**: resultCode, resultMsg, merchantId, merchantKey
- **설명**: 새로운 가맹점을 시스템에 등록합니다. 가맹점 기본 정보, 담당자 정보, 계좌 정보 등을 설정합니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

#### 가맹점 목록 조회 API

- **파일명**: additional-apis.md
- **주요 파라미터**: searchKeyword, page, limit
- **응답 파라미터**: resultCode, resultMsg, totalCount, merchants
- **설명**: 등록된 가맹점 목록을 조회합니다. 본사 계정은 모든 가맹점을 조회할 수 있습니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

#### 가맹점 설정 API

- **파일명**: additional-apis.md
- **주요 파라미터**: merchantId, depositFeeRate, withdrawalFeeRate, accountType, amountMatchRequired, allowedAmountError
- **응답 파라미터**: resultCode, resultMsg, merchantId, updatedSettings
- **설명**: 가맹점의 설정 정보를 관리합니다. 수수료율, 가상계좌 유형, 입금 신청금액 일치 여부 등을 설정합니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

### 4. 거래 관리 관련 API

#### 입금 내역 조회 API

- **파일명**: additional-apis.md
- **주요 파라미터**: merchantId (선택적), startDate, endDate, page, limit, status
- **응답 파라미터**: resultCode, resultMsg, totalCount, deposits
- **설명**: 입금 거래 내역을 조회합니다. 본사 계정은 모든 가맹점의 입금 내역을 조회할 수 있습니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

#### 출금 내역 조회 API

- **파일명**: additional-apis.md
- **주요 파라미터**: merchantId (선택적), startDate, endDate, page, limit, status
- **응답 파라미터**: resultCode, resultMsg, totalCount, withdrawals
- **설명**: 출금 거래 내역을 조회합니다. 본사 계정은 모든 가맹점의 출금 내역을 조회할 수 있습니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

#### 출금 API

- **파일명**: withdrawal.md
- **주요 파라미터**: merchantId, amount, bankCode, accountNo, accountHolder, memo
- **응답 파라미터**: resultCode, resultMsg, transactionId, merchantId, amount, fee, netAmount, status
- **설명**: 가맹점 계정에서 출금을 요청합니다. 출금 가능 잔액 내에서만 출금이 가능합니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

### 5. 가상계좌 관리 관련 API

#### 가상계좌 발급 API

- **파일명**: additional-apis.md
- **주요 파라미터**: merchantId, accountType, bankCode, amount, expireDate, depositorName
- **응답 파라미터**: resultCode, resultMsg, virtualAccount
- **설명**: 가맹점에 가상계좌를 발급합니다. 고정형(fixed) 또는 동적(dynamic) 가상계좌를 발급할 수 있습니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

#### 가상계좌 입금 테스트 API

- **파일명**: additional-apis.md
- **주요 파라미터**: accountNo, bankCode, amount, depositorName
- **응답 파라미터**: resultCode, resultMsg, transactionId, merchantId, accountNo, bankCode, amount, depositorName, status
- **설명**: 테스트 환경에서 가상계좌 입금을 시뮬레이션합니다. 실제 은행 연동 없이 가상계좌 입금 처리를 테스트할 수 있습니다.
- **테스트 가능 여부**: 가능
- **실행 성공 여부**: 성공

## 구현 필요한 API 상세 정보

### 1. 입금 처리 관련 API

#### 수취조회 API

- **파일명**: api-processing-guide.md
- **주요 파라미터**: 다양한 은행-VAN 연동 파라미터
- **응답 파라미터**: 다양한 은행-VAN 연동 응답 파라미터
- **설명**: 은행에서 고객이 입금하기 전 예금주명 및 입금 가능상태에 대하여 조회하는 전문입니다.
- **테스트 가능 여부**: 불가능 (구현 필요)
- **실행 성공 여부**: 해당 없음

#### 입금사전조회 API

- **파일명**: api-processing-guide.md
- **주요 파라미터**: 다양한 은행-VAN 연동 파라미터
- **응답 파라미터**: 다양한 은행-VAN 연동 응답 파라미터
- **설명**: 입금요청 발생시 전문이 발생하며 해당전문에 제휴기관이 정상 응답하는 경우 입금전문이 발생합니다.
- **테스트 가능 여부**: 불가능 (구현 필요)
- **실행 성공 여부**: 해당 없음

#### 입금 API

- **파일명**: api-processing-guide.md
- **주요 파라미터**: 다양한 은행-VAN 연동 파라미터
- **응답 파라미터**: 다양한 은행-VAN 연동 응답 파라미터
- **설명**: 입금전문은 통보성 전문이며 이미 입금이 완료된 상태로 제휴기관으로부터 정상응답이 수신될 때까지 10분마다 재전송합니다.
- **테스트 가능 여부**: 불가능 (구현 필요)
- **실행 성공 여부**: 해당 없음

#### 입금정정 API

- **파일명**: api-processing-guide.md
- **주요 파라미터**: 다양한 은행-VAN 연동 파라미터
- **응답 파라미터**: 다양한 은행-VAN 연동 응답 파라미터
- **설명**: 입금정정은 입금전문과 거래번호가 동일하게 전송되며 해당거래번호에 대하여 정상응답이 오는 경우 거래에 대해 정정이 처리됩니다.
- **테스트 가능 여부**: 불가능 (구현 필요)
- **실행 성공 여부**: 해당 없음

#### 집계 API

- **파일명**: api-processing-guide.md
- **주요 파라미터**: 다양한 은행-VAN 연동 파라미터
- **응답 파라미터**: 다양한 은행-VAN 연동 응답 파라미터
- **설명**: 집계 API는 더즌과 은행간 집계내역을 기관으로 전송하며 응답시 기관이 집계된 거래내역을 더즌으로 SET하여 리턴합니다.
- **테스트 가능 여부**: 불가능 (구현 필요)
- **실행 성공 여부**: 해당 없음

### 2. 추가 필요 API

#### 시스템 설정 API

- **파일명**: 미정의
- **주요 파라미터**: 미정의
- **응답 파라미터**: 미정의
- **설명**: 시스템 전반의 설정을 관리합니다. 시스템 환경 설정, 보안 설정, 로그 설정 등을 관리합니다.
- **테스트 가능 여부**: 불가능 (추가 정의 필요)
- **실행 성공 여부**: 해당 없음

#### 알림 설정 API

- **파일명**: 미정의
- **주요 파라미터**: 미정의
- **응답 파라미터**: 미정의
- **설명**: 텔레그램 알림 등 알림 설정을 관리합니다. 텔레그램 봇 연동 설정, 알림 조건 설정, 알림 대상 설정 등을 관리합니다.
- **테스트 가능 여부**: 불가능 (추가 정의 필요)
- **실행 성공 여부**: 해당 없음

#### 통계 API

- **파일명**: 미정의
- **주요 파라미터**: 미정의
- **응답 파라미터**: 미정의
- **설명**: 거래 통계 정보를 제공합니다. 기간별 거래 통계, 가맹점별 거래 통계, 수수료 통계 등을 제공합니다.
- **테스트 가능 여부**: 불가능 (추가 정의 필요)
- **실행 성공 여부**: 해당 없음

#### 로그 관리 API

- **파일명**: 미정의
- **주요 파라미터**: 미정의
- **응답 파라미터**: 미정의
- **설명**: 시스템 로그를 관리합니다. 로그 조회, 로그 레벨 설정, 로그 보관 기간 설정 등을 관리합니다.
- **테스트 가능 여부**: 불가능 (추가 정의 필요)
- **실행 성공 여부**: 해당 없음

## 테스트 시나리오 및 실행 가능 여부

### 완전히 테스트 가능한 시나리오

1. **로그인 및 OTP 인증 테스트**

   - 로그인 API를 호출하여 사용자 인증
   - OTP 인증 API를 호출하여 2차 인증
   - **실행 가능 여부**: 가능
   - **성공 여부**: 성공

2. **가맹점 잔액 조회 테스트**

   - 본사 계정으로 모든 가맹점 잔액 조회
   - 가맹점 계정으로 해당 가맹점 잔액만 조회
   - **실행 가능 여부**: 가능
   - **성공 여부**: 성공

3. **가맹점 설정 테스트**

   - 가맹점 수수료 설정
   - 가상계좌 유형 설정
   - 입금 신청금액 일치 여부 설정
   - **실행 가능 여부**: 가능
   - **성공 여부**: 성공

4. **출금 처리 테스트**
   - 출금 요청 및 처리
   - 출금 수수료 적용 확인
   - 출금 내역 조회
   - **실행 가능 여부**: 가능
   - **성공 여부**: 성공

### 제한적으로 테스트 가능한 시나리오

1. **가상계좌 입금 테스트**
   - 가상계좌 발급
   - 테스트 API를 통한 가상계좌 입금 시뮬레이션
   - 동일 금액 여러 번 입금 테스트
   - 입금 신청금액 일치 여부 설정에 따른 동작 확인
   - **실행 가능 여부**: 가능 (실제 은행 연동 없이 테스트 API로 시뮬레이션)
   - **성공 여부**: 성공

### 테스트 불가능한 시나리오

1. **실제 은행 연동 입금 처리 흐름**

   - 수취조회 → 입금사전조회 → 입금 → 입금정정 → 집계 API 흐름
   - **실행 가능 여부**: 불가능 (구현 필요)
   - **성공 여부**: 해당 없음

2. **시스템 설정 및 알림 설정**

   - 시스템 환경 설정
   - 텔레그램 알림 설정
   - **실행 가능 여부**: 불가능 (추가 정의 필요)
   - **성공 여부**: 해당 없음

3. **통계 및 로그 관리**
   - 거래 통계 조회
   - 시스템 로그 관리
   - **실행 가능 여부**: 불가능 (추가 정의 필요)
   - **성공 여부**: 해당 없음
